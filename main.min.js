!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";r(2),r(3),r(8),r(14)},function(t,e){"use strict";function r(t){for(var e=t.querySelectorAll(u.navLink),r=[],o=0;o<e.length;o++)r[o]=e[o];return r}function o(){window.matchMedia("(max-width: 525px)").matches?document.querySelector(u.nav).setAttribute(c.mode,c.list):document.querySelector(u.nav).removeAttribute(c.mode)}function n(){var t=document.querySelector(u.navList);t.getAttribute(c.navState)===c.open?t.removeAttribute(c.navState):t.setAttribute(c.navState,c.open)}function a(t){t.stopPropagation(),document.querySelector(u.navList).removeAttribute(c.navState)}var i=900,s=250,c={state:"data-state",transition:"in-transition",mode:"data-mode",list:"list",navState:"data-state",open:"open",style:"data-style",collapse:"is-collapsed"},u={nav:".page-navigation",navIcon:".page-navigation__icon",navList:".page-navigation__list",navLink:".page-navigation__link",header:".page-header ",footer:".page-footer "},l=document.querySelector(u.header+u.navList),d=document.querySelector(u.footer+u.navList),h=r(l),p=r(d),m=!1,f=function(t,e){for(var r=0;r<t.length;r++)t[r].removeAttribute("disabled");e.setAttribute("disabled","disabled")},y=function(){var t=void 0;return window.pageYOffset?t=window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},_=function(t){var e=t.target,r=document.body;e.hasAttribute("href")&&!function(){var o=e.getAttribute("href"),a="#"!==o?document.querySelector(o).offsetTop:0,s=y(),u=void 0;u=a>s?"-"+(a-s):s-a,r.setAttribute(c.state,c.transition),r.style.WebkitTransform="translate(0, "+u+"px)",r.style.MozTransform="translate(0, "+u+"px)",r.style.transform="translate(0, "+u+"px)",window.setTimeout(function(){r.removeAttribute(c.state),r.style.cssText="",window.scrollTo(0,a)},i),f(h,e),f(p,e),n(),m=!0,t.preventDefault()}()},v=function(){var t=document.querySelector(u.nav);y()>s?t.setAttribute(c.style,c.collapse):t.removeAttribute(c.style)},g=function(){v(),m?m=!1:!function(){for(var t=y(),e=h.map(function(t){var e=t.getAttribute("href"),r=void 0;return"#"!==e&&(r=e),r}),r=e.map(function(e){var r=void 0;return e&&document.querySelector(e).offsetTop<t&&(r=e),r}),o=r.filter(function(t){var e=void 0;return t&&(e=t),e}),n=o[o.length-1]||"#",a=0;a<h.length;a++)h[a].getAttribute("href")===n&&(f(h,h[a]),f(p,p[a]))}()};!function(){f(h,h[0]),f(p,p[0]),o(),l.addEventListener("click",_),d.addEventListener("click",_),document.querySelector(u.navIcon).addEventListener("click",n),document.onclick=a,window.onscroll=g,window.onresize=o}()},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var n=r(4),a=o(n),i=r(6),s=o(i),c=r(5),u=document.querySelector(".artist"),l=document.querySelector("#artists-item"),d=document.querySelector(".artists__list"),h=[];!function(){var t=new XMLHttpRequest;(0,c.loadingIsProgress)(u),t.onload=function(t){var e=JSON.parse(t.target.response);(0,c.endLoading)(u),h=e.map(function(t){return new a.default(t)}),h.forEach(function(t){new s.default(t,l,d).chooseArtist(document.querySelectorAll(".artists__item")[0])})},t.onerror=(0,c.showLoadingError)(u),t.timeout=1e4,t.ontimeout=(0,c.showLoadingError)(u),t.open("GET","server/artists.json"),t.send()}()},function(t,e,r){"use strict";function o(t){(0,n.bindAllFunc)(this),this.data=t}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o,o.prototype.getArtistFirstName=function(){return this.data.firstName},o.prototype.getArtistSecondName=function(){return this.data.secondName},o.prototype.getArtistTask=function(){return this.data.task},o.prototype.getArtistPhoto=function(){return this.data.photo},o.prototype.getArtistDescription=function(){return this.data.descr}},function(t,e){"use strict";function r(t){for(var e in t)"function"==typeof t[e]&&(t[e]=t[e].bind(t))}function o(t){t.setAttribute(c.attrName,c.attrValueProcess)}function n(t){t.removeAttribute(c.attrName)}function a(t){n(t),t.setAttribute(c.attrName,c.attrValueError)}function i(t){return t<10?"0"+t:t}function s(t){return["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t]}Object.defineProperty(e,"__esModule",{value:!0}),e.bindAllFunc=r,e.loadingIsProgress=o,e.endLoading=n,e.showLoadingError=a,e.addLeadingNull=i,e.monthNum2Name=s;var c={attrName:"data-state",attrValueProcess:"is-loading",attrValueError:"is-failure"}},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e,r){(0,s.bindAllFunc)(this),this.data=t,this._createArtistListElement(e),this._setArtistListDataToElement(),this._renderTo(r)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(7),i=o(a),s=r(5);e.default=n;var c={state:"data-state",stateValue:"is-active"},u={artistItem:".artists__item",name:".artists__name",task:".artists__task"};n.prototype._createArtistListElement=function(t){var e=void 0;e="content"in t?t.content.querySelector(u.artistItem):t.querySelector(u.artistItem),this.element=e.cloneNode(!0)},n.prototype._setArtistListDataToElement=function(){this.element.querySelector(u.name).textContent=this.data.getArtistFirstName()+" "+this.data.getArtistSecondName(),this.element.querySelector(u.task).textContent=this.data.getArtistTask()},n.prototype._renderTo=function(t){t.appendChild(this.element),this.element.addEventListener("click",this._onArtistClick)},n.prototype.chooseArtist=function(t){for(var e=document.querySelectorAll(u.artistItem),r=0;r<e.length;r++)e[r].removeAttribute(c.state);t.setAttribute(c.state,c.stateValue);new i.default(this.data)},n.prototype._onArtistClick=function(t){t.stopPropagation(),this.chooseArtist(this.element)}},function(t,e,r){"use strict";function o(t){(0,n.bindAllFunc)(this),this.data=t,this._setArtistDataToElement()}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o;var a="images/about/img/photo.jpg",i={photo:".artist__photo",firstName:".artist__first-name",secondName:".artist__second-name",descr:".artist__descr"};o.prototype._setArtistDataToElement=function(){var t=new Image(380,380),e=void 0;t.onload=function(){clearTimeout(e),document.querySelector(i.photo).src=t.src},t.src=this.data.getArtistPhoto(),t.onerror=function(){document.querySelector(i.photo).src=a},e=setTimeout(function(){document.querySelector(i.photo).src=a},1e4),document.querySelector(i.firstName).textContent=this.data.getArtistFirstName(),document.querySelector(i.secondName).textContent=this.data.getArtistSecondName(),document.querySelector(i.descr).textContent=this.data.getArtistDescription()}},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var n=r(9),a=o(n),i=r(10),s=o(i),c=r(11),u=o(c),l=r(13),d=o(l),h=r(5),p=document.querySelector("#discography-item"),m=document.querySelector(".discography__list"),f=document.querySelector(".playlist__list"),y=document.querySelector("#playlist-item"),_=document.querySelector(".audio"),v=document.querySelector(".player__state"),g=document.querySelector(".player__next"),A=document.querySelector(".player__prev"),T=document.querySelector(".player__total-progress"),b=[];!function(){var t=new XMLHttpRequest;(0,h.loadingIsProgress)(m),t.onload=function(t){var e=JSON.parse(t.target.response),r=null;(0,h.endLoading)(m),b=e.map(function(t){return new a.default(t)}),b.forEach(function(t){var e=new s.default(p,t),o=t.getAlbumTrackList();e.renderTo(m),e.onChooseAlbum(function(){var e=t.getAlbumName(),r=new u.default(y,o,f),n=new d.default(e,o,_,v,g,A,T);n.setNewTrack(0),r.onChooseTrack(function(t){n.setNewTrack(t)}),n.onChooseTrack(function(t){r.setNewTrack(t)})}),r=r||e}),r.chooseAlbum(document.querySelectorAll(".discography__item")[0])},t.onerror=(0,h.showLoadingError)(m),t.timeout=1e4,t.ontimeout=(0,h.showLoadingError)(m),t.open("GET","server/albums.json"),t.send()}()},function(t,e,r){"use strict";function o(t){(0,n.bindAllFunc)(this),this.data=t}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o,o.prototype.getAlbumName=function(){return this.data.name},o.prototype.getAlbumYear=function(){return this.data.year},o.prototype.getAlbumCover=function(){return this.data.cover},o.prototype.getAlbumTrackList=function(){return this.data.tracks}},function(t,e,r){"use strict";function o(t,e){(0,n.bindAllFunc)(this),this.data=e,this._createAlbumElement(t),this._setAlbumDataToElement()}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o;var a="images/music/img/cover.jpg",i={state:"data-state",stateValue:"is-active"},s={discography:".discography__item",cover:".album__cover",name:".album__name",year:".album__year",play:".album__play"};o.prototype._createAlbumElement=function(t){var e=void 0;e="content"in t?t.content.querySelector(s.discography):t.querySelector(s.discography),this.element=e.cloneNode(!0)},o.prototype._setAlbumDataToElement=function(){this.element.querySelector(s.name).textContent=this.data.getAlbumName(),this.element.querySelector(s.year).textContent=this.data.getAlbumYear()},o.prototype._loadAlbumCover=function(){var t=new Image(380,380),e=void 0;t.onload=function(){clearTimeout(e),document.querySelector(s.cover).src=t.src},t.src=this.data.getAlbumCover(),t.onerror=function(){document.querySelector(s.cover).src=a},e=setTimeout(function(){document.querySelector(s.cover).src=a},1e4)},o.prototype.renderTo=function(t){t.appendChild(this.element),this.element.querySelector(s.play).addEventListener("click",this._onAlbumListen)},o.prototype._onAlbumListen=function(t){t.stopPropagation(),this.chooseAlbum(this.element)},o.prototype.chooseAlbum=function(t){for(var e=document.querySelectorAll(s.discography),r=0;r<e.length;r++)e[r].removeAttribute(i.state),e[r].querySelector(s.play).removeAttribute("disabled");t.setAttribute(i.state,i.stateValue),t.querySelector(s.play).setAttribute("disabled","disabled"),this._loadAlbumCover(),this._onChooseAlbum()},o.prototype.onChooseAlbum=function(t){this._onChooseAlbum=t}},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e,r){(0,s.bindAllFunc)(this),this.data=e,this.renderTracksList(t,r)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(12),i=o(a),s=r(5);e.default=n;var c={playlist:".playlist__item"};n.prototype.renderTracksList=function(t,e){for(var r=this,o=document.querySelectorAll(c.playlist),n=[],a=0;a<o.length;a++)o[a].remove();this.data.forEach(function(o,a){var s=new i.default(t,o);s.renderTo(e),n.push(s),s.onChooseTrack(function(){r.chooseTrack(s),r._onChooseTrack(a)})}),this.tracksToRender=n,this.chooseTrack(n[0])},n.prototype.chooseTrack=function(t){for(var e=0;e<this.tracksToRender.length;e++)this.tracksToRender[e].stopTrack();t.playTrack()},n.prototype.setNewTrack=function(t){this.chooseTrack(this.tracksToRender[t])},n.prototype.onChooseTrack=function(t){this._onChooseTrack=t}},function(t,e,r){"use strict";function o(t,e){(0,n.bindAllFunc)(this),this.data=e,this._createTrackElement(t),this._setTrackDataToElement()}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o;var a={state:"data-state",stateValue:"is-active"},i={playlist:".playlist__item",name:".track__name",duration:".track__duration",play:".track__play"};o.prototype._createTrackElement=function(t){var e=void 0;e="content"in t?t.content.querySelector(i.playlist):t.querySelector(i.playlist),this.element=e.cloneNode(!0)},o.prototype._setTrackDataToElement=function(){this.element.querySelector(i.name).textContent=this.data.name,this.element.querySelector(i.duration).textContent=this.data.duration},o.prototype.renderTo=function(t){t.appendChild(this.element),this.element.querySelector(i.play).addEventListener("click",this._onTrackPlay)},o.prototype.playTrack=function(){var t=this.element.querySelector(i.play);this.element.setAttribute(a.state,a.stateValue),t.setAttribute("disabled","disabled"),t.setAttribute("title","Playing...")},o.prototype.stopTrack=function(){this.element.removeAttribute(a.state),this.element.querySelector(i.play).removeAttribute("disabled")},o.prototype._onTrackPlay=function(t){t.stopPropagation(),this._onChooseTrack(this)},o.prototype.onChooseTrack=function(t){this._onChooseTrack=t}},function(t,e,r){"use strict";function o(t,e,r,o,a,i,s){(0,n.bindAllFunc)(this),this.container=r,this.state=o,this.next=a,this.prev=i,this.progress=s,this.loadTracksList(t,e),this.container.addEventListener("timeupdate",this._onProgress),this.progress.addEventListener("click",this._onRewindTrack),this.container.addEventListener("ended",this._onNextTrack),this.state.addEventListener("click",this._onPlayerState),this.next.addEventListener("click",this._onNextTrack),this.prev.addEventListener("click",this._onPrevTrack)}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o;var a={state:"data-state",isActive:"is-active"},i={playlist:".playlist__item",album:".player__album",track:".player__track",mp3:".audio__source-mp3",ogg:".audio__source-ogg",curProgress:".player__current-progress"};o.prototype.loadTracksList=function(t,e){this.album=t,this.list=e},o.prototype.setNewTrack=function(t){for(var e=0;e<this.list.length;e++)+this.list[e].id===t&&(this.currentTrack=this.list[e],this.currentTrackIndex=e);document.querySelector(i.album).innerHTML=this.album,document.querySelector(i.track).innerHTML=this.currentTrack.name,document.querySelector(i.mp3).src="server/tracks/"+this.currentTrack.url+".mp3",document.querySelector(i.ogg).src="server/tracks/"+this.currentTrack.url+".ogg",this._loadTrack(),this._changeControlsState("next",this.next),this._changeControlsState("prev",this.prev)},o.prototype._loadTrack=function(){this.container.load(),this._playTrack()},o.prototype._playTrack=function(){this.container.play(),this.state.setAttribute(a.state,"pause"),this.state.setAttribute("title","Pause")},o.prototype._pauseTrack=function(){this.container.pause(),this.state.setAttribute(a.state,"play"),this.state.setAttribute("title","Play")},o.prototype._findNextTrack=function(t){var e=void 0;return"prev"===t?this.currentTrackIndex-1>=0&&(e=this.currentTrackIndex-1):this.currentTrackIndex+1<this.list.length&&(e=this.currentTrackIndex+1),e},o.prototype._changeControlsState=function(t,e){this._findNextTrack(t)>=0?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")},o.prototype._playNewTrack=function(t){var e=this._findNextTrack(t);if(e>=0){for(var r=document.querySelectorAll(i.playlist),o=0;o<r.length;o++)r[o].hasAttribute(a.state)&&r[o].removeAttribute(a.state);this.setNewTrack(e),this._onChooseTrack(e)}this._changeControlsState("next",this.next),this._changeControlsState("prev",this.prev)},o.prototype._onPrevTrack=function(){this._playNewTrack("prev")},o.prototype._onNextTrack=function(){this._playNewTrack("next")},o.prototype._onPlayerState=function(){this.container.paused?this._playTrack():this._pauseTrack()},o.prototype._onProgress=function(){var t=Math.floor(this.container.currentTime)/Math.floor(this.container.duration);document.querySelector(i.curProgress).style.width=Math.floor(t*this.progress.offsetWidth)+"px"},o.prototype._onRewindTrack=function(t){this.container.currentTime=this.container.duration*(t.offsetX/this.progress.getBoundingClientRect().width)},o.prototype.onChooseTrack=function(t){this._onChooseTrack=t}},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var n=r(15),a=o(n),i=r(16),s=o(i),c=r(17),u=o(c),l=r(5),d=document.querySelector(".artist"),h=document.querySelector("#concerts-item"),p=document.querySelector(".concerts__list"),m=document.querySelector("#future-concert"),f=document.querySelector(".future-concert__list"),y=[],_=[];!function(){var t=new XMLHttpRequest;(0,l.loadingIsProgress)(d),t.onload=function(t){var e=JSON.parse(t.target.response);(0,l.endLoading)(d),y=e.map(function(t){return new a.default(t)}),y.forEach(function(t,e,r){var o=new s.default(t,e,h,p);t.getConcertDate().getTime()>Date.now()&&(_.push(e),new u.default(t,m,f)),e===r.length-1&&o.chooseConcert(_[0])})},t.onerror=(0,l.showLoadingError)(d),t.timeout=1e4,t.ontimeout=(0,l.showLoadingError)(d),t.open("GET","server/concerts.json"),t.send()}()},function(t,e,r){"use strict";function o(t){(0,n.bindAllFunc)(this),this.data=t}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o,o.prototype.getConcertPlace=function(){return this.data.place},o.prototype.getConcertCity=function(){return this.data.city},o.prototype.getConcertDate=function(){return new Date(this.data.date)}},function(t,e,r){"use strict";function o(t,e,r,o){(0,n.bindAllFunc)(this),this.data=t,this.index=e,this._createConcertListElement(r),this._setConcertListDataToElement(),this._renderTo(o)}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o;var a={state:"data-state",stateActive:"is-active",statePast:"is-past"},i={concertItem:".concerts__item",placeAndDate:".concerts__place-date",city:".concerts__city"};o.prototype._createConcertListElement=function(t){var e=void 0;e="content"in t?t.content.querySelector(i.concertItem):t.querySelector(i.concertItem),this.element=e.cloneNode(!0)},o.prototype._setFormattedDate=function(){var t=this.data.getConcertDate(),e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?"TODAY":(0,n.addLeadingNull)(t.getDate())+"/"+(0,n.addLeadingNull)(t.getMonth()+1)+"/"+t.getFullYear()},o.prototype._deactivatePastConcerts=function(){this.data.getConcertDate().getTime()<Date.now()?this.element.setAttribute(a.state,a.statePast):this.element.removeAttribute(a.state)},o.prototype._setConcertListDataToElement=function(){this.element.querySelector(i.placeAndDate).textContent=this.data.getConcertPlace()+" , "+this._setFormattedDate(),this.element.querySelector(i.city).textContent=this.data.getConcertCity()},o.prototype._renderTo=function(t){t.appendChild(this.element),this._deactivatePastConcerts(),this.element.addEventListener("click",this._onConcertClick)},o.prototype.chooseConcert=function(t){for(var e=document.querySelectorAll(i.concertItem),r=0;r<e.length;r++)e[r].getAttribute(a.state)===a.stateActive&&e[r].removeAttribute(a.state);e[t].setAttribute(a.state,a.stateActive)},o.prototype._onConcertClick=function(t){t.stopPropagation(),this.chooseConcert(this.index)}},function(t,e,r){"use strict";function o(t,e,r){(0,n.bindAllFunc)(this),this.data=t,this._createConcertElement(e),this._setConcertDataToElement(),this._renderTo(r)}Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=o;var a={concertItem:".future-concert__item",info:".future-concert__text",day:".future-concert__day",month:".future-concert__month",year:".future-concert__year"};o.prototype._createConcertElement=function(t){var e=void 0;e="content"in t?t.content.querySelector(a.concertItem):t.querySelector(a.concertItem),this.element=e.cloneNode(!0)},o.prototype._setConcertDataToElement=function(){var t=this.data.getConcertDate();this.element.querySelector(a.day).textContent=(0,n.addLeadingNull)(t.getDate()),this.element.querySelector(a.month).textContent=(0,n.monthNum2Name)(t.getMonth()),this.element.querySelector(a.year).textContent=t.getFullYear(),this.element.querySelector(a.info).textContent=this.data.getConcertPlace()+" // "+this.data.getConcertCity()},o.prototype._renderTo=function(t){t.appendChild(this.element)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9tYWluLmpzIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==